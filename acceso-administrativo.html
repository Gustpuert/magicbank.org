<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>MagicBank | Acceso Administrativo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      background: #070C2A;
      color: #fff;
      font-family: Inter, system-ui, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .box {
      background: rgba(255,255,255,0.05);
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
      text-align: center;
      max-width: 360px;
      width: 100%;
    }

    h1 {
      color: #D6B15A;
      font-size: 22px;
      margin-bottom: 18px;
    }

    input {
      width: 100%;
      padding: 14px;
      border-radius: 8px;
      border: none;
      margin-bottom: 16px;
      font-size: 15px;
    }

    button {
      width: 100%;
      padding: 14px;
      background: #D6B15A;
      color: #1a1a1a;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    p {
      margin-top: 14px;
      font-size: 14px;
      color: #CFCFD6;
    }
  </style>
</head>

<body>

<div class="box">
  <h1>Acceso Administrativo MagicBank</h1>
  <input id="clave" type="password" placeholder="Clave administrativa">
  <button onclick="acceder()">Ingresar</button>
  <p id="mensaje"></p>
</div>

<script>
/* =====================================================
   MAGICBANK ‚Äì ACCESO ADMINISTRATIVO CON CLAVE ROTATIVA
   ===================================================== */

const CLAVES = ["admin3232", "admin3233", "admin3234"];
const DURACION = 15 * 60 * 1000; // 15 minutos

function claveActual() {
  const indice = localStorage.getItem("mb_indice_clave");
  return CLAVES[indice ? parseInt(indice, 10) : 0];
}

function avanzarClave() {
  let indice = parseInt(localStorage.getItem("mb_indice_clave") || "0", 10);
  indice = (indice + 1) % CLAVES.length;
  localStorage.setItem("mb_indice_clave", indice);
}

function acceder() {
  const input = document.getElementById("clave").value;
  const mensaje = document.getElementById("mensaje");

  if (input !== claveActual()) {
    mensaje.textContent = "Clave incorrecta.";
    return;
  }

  // Guarda inicio de sesi√≥n
  localStorage.setItem("mb_admin_inicio", Date.now());
  mensaje.textContent = "Acceso concedido. Redirigiendo...";

  // Redirige a la f√°brica de tutores (puedes cambiar destino)
  setTimeout(() => {
    window.location.href = "https://magicbank.org/fabrica-de-tutores.html";
  }, 800);
}

// Al cargar la p√°gina, verifica si expir√≥ la sesi√≥n anterior
(function verificarExpiracion() {
  const inicio = localStorage.getItem("mb_admin_inicio");
  if (!inicio) return;

  const ahora = Date.now();
  if (ahora - parseInt(inicio, 10) > DURACION) {
    localStorage.removeItem("mb_admin_inicio");
    avanzarClave(); // üîÅ rota la clave
  }
})();
</script>

</body>
</html>
